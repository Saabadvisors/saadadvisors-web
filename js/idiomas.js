const traducciones = {
    "es": {
        "menu_logo": "SAAB ADVISORS, LLC",
        "menu_contacto": "Contacto",
        "menu_idioma_actual": "Español",
        "portada_tagline": "SAAB ADVISORS, LLC",
        "portada_titulo": "Asesoría Contable y Estratégica para tu Crecimiento en EE. UU",
        "portada_subtitulo": "Transformamos la complejidad de su administración y finanzas en sencillez. Nosotros nos encargamos del trabajo; usted disfruta del rendimiento.",
        "portada_btn_consulta": "Agenda una Consulta",
        
        // --- Sección Características (Iconos) ---
        "caracteristicas_titulo": "Nuestros Servicios",
        "caract_titulo_1": "Estructura Empresarial",
        "caract_desc_1": "Contamos con un equipo de asesores con amplia trayectoria en las áreas legal, fiscal y corporativa, garantizando soluciones fundamentadas.",
        "caract_titulo_2": "Servicios de Nómina",
        "caract_desc_2": "Ofrecemos una perspectiva 360°, uniendo la planificación legal-fiscal con la contabilidad, para una operación sin riesgos y optimizada.",
        "caract_titulo_3": "Contabilidad y Registros",
        "caract_desc_3": "Nuestra asesoría no solo resuelve problemas actuales, sino que está diseñada para cimentar el crecimiento futuro y la solidez de su negocio.",
        
        // --- Sección Sobre Nosotros ---
        "sobre_titulo": "¿Quiénes somos?",
        "sobre_p1": "Somos una firmasesoría integral con sede en EE. UU., especializada en la contabilidad y consultoría para impulsar a las pequeñas y medianas empresas. Nuestro equipo multidisciplinario se dedica a encontrar soluciones prácticas a los desafíos financieros y de cumplimiento normativo.",
        "sobre_p2": "Ofrecemos un servicio distintivo al mantener una comunicación abierta y permanente con nuestros clientes, contadores y administradores. Este enfoque colaborativo es la base para asegurar el crecimiento y el bienestar tanto de su empresa como de nuestros colaboradores.",
        "sobre_punto_titulo_1": "Liderazgo en Energía",
        "sobre_punto_desc_1": "Especialización profunda en el marco regulatorio del sector energético.",
        "sobre_punto_titulo_2": "Cumplimiento (Compliance)",
        "sobre_punto_desc_2": "Estrategias legales y fiscales diseñadas para operar sin riesgo de sanciones.",
        
        // --- Sección Servicios (Tarjetas Detalladas) ---
        "servicios_titulo": "Información Detallada", // Título de la sección de servicios
        
        "servicios_card1_titulo": "INICIO DE NEGOCIOS",
        "servicios_card1_desc": "Entendemos que todos los negocios son diferentes. En este sentido, le ofrecemos todos los servicios que necesita para comenzar su negocio.",
        "servicios_card2_titulo": "SERVICIOS DE NÓMINA",
        "servicios_card2_desc": "Nuestros Servicios de Nómina están diseñados para proporcionarle una solución integral para la gestión de sus obligaciones de nómina.",
        "servicios_card3_titulo": "CONTABILIDAD Y REGISTROS",
        "servicios_card3_desc": "Evaluamos la situación financiera y gestionamos el registro sistemático y preciso de todas las transacciones, esencial para la planificación fiscal y la salud del negocio.",

        // Listas de Servicios (Claves nuevas para las listas)
        "servicios_lista1_intro": "Servicios:",
        "servicios_lista1_1": "Plan de Negocio",
        "servicios_lista1_2": "Fundación Legal-Fiscal (Anti-Sanciones)",
        "servicios_lista1_3": "Propiedad Única (Sole Proprietorship)",
        "servicios_lista1_4": "Sociedad Colectiva (Partnership)",
        "servicios_lista1_5": "Corporación (incluye S Corp)",
        "servicios_lista1_6": "Compañía de Responsabilidad Limitada (LLC)",

        "servicios_lista2_intro": "Servicios:",
        "servicios_lista2_1": "Formularios de Impuestos Trimestrales",
        "servicios_lista2_2": "Formularios de Impuestos de Fin de Año",
        "servicios_lista2_3": "W2 y 1099",

        "servicios_lista3_intro": "Nuestros servicios incluyen, pero no se limitan a:",
        "servicios_lista3_1": "Teneduría de Libros: Gestión de registros financieros mensuales, trimestrales o anuales.",
        "servicios_lista3_2": "Libro Mayor (General Ledger): Preparación del estado de posición financiera.",
        "servicios_lista3_3": "Conciliación Bancaria: Verificación y ajuste de saldos bancarios y registros contables.",
        "servicios_lista3_4": "Nómina y Presentación de Impuestos de Nómina.",
        "servicios_lista3_5": "Impuesto sobre las Ventas (Sales Tax).",
        
        // --- Sección Proceso ---
        "proceso_titulo": "Cómo Trabajamos",
        "proceso_texto": "El proceso en SAAB Advisors se basa en el descubrimiento detallado de sus necesidades, la planificación legal estratégica, la ejecución rigurosa de los trámites y la implementación exitosa de las estructuras fiscales y corporativas.",
        "proceso_paso_1": "Paso 1: Descubrimiento",
        "proceso_paso_2": "Paso 2: Planificación",
        "proceso_paso_3": "Paso 3: Desarrollo Estratégico",
        "proceso_paso_4": "Paso 4: Implementación",
        
        // --- Sección Testimonios ---
        "testimonio_titulo": "Testimonios",
        "testimonio_1_p": "Su capacidad de respuesta fue increíblemente rápida, haciendo que todo el proceso de configuración fuera fluido y sin preocupaciones. Excelente atención y orientación.",
        "testimonio_1_cite": "- Ricardo P., CEO de Tus Asesores, LLC",
        "testimonio_2_p": "La transición de nuestra nómina fue fluida y sin errores. La claridad en la presentación de formularios W2 y 1099 nos dio una tranquilidad que antes no teníamos.",
        "testimonio_2_cite": "- Sofía M., Directora Administrativa de Global Fuels",
        "testimonio_3_p": "La teneduría de libros es ahora un proceso transparente. El balance general y la conciliación bancaria son entregados con una precisión y detalle excepcional.",
        "testimonio_3_cite": "- Alejandro R., Fundador de Capital Ventures",
        
        // --- Sección Contacto ---
        "contacto_titulo": "Contáctanos",
        "contacto_descripcion": "Estamos listos para atender sus dudas y comenzar a diseñar la ruta estratégica que asegurará el bienestar y el crecimiento de su empresa en EE. UU.",
        "contacto_online_titulo": "Nuestra Ventaja",
        "contacto_online_descripcion": "Operamos 100% online, ofreciendo flexibilidad y acceso a nuestros servicios desde cualquier parte del mundo.",
        "contacto_telefono_titulo": "Llámanos",
        "contacto_telefono_valor": "+1 (786) 5614860", // El valor no se traduce, se mantiene como texto, pero la clave existe.
        "link_whatsapp": "Chatea con un Asesor",
        "link_agenda": "Agenda una Cita",
        "contacto_siguenos": "Síguenos",
        "formulario_nombre": "Nombre Completo",
        "formulario_email": "Correo Electrónico",
        "formulario_telefono": "Teléfono (Opcional)",
        "formulario_asunto": "Asunto",
        "formulario_placeholder_nombre": "John Carter",
        "formulario_placeholder_email": "ejemplo@tuemail.com",
        "formulario_placeholder_telefono": "123 - 456 - 7890",
        "formulario_placeholder_asunto": "Consulta de Diseño",
        "formulario_label_servicio": "Servicio de Interés",
        "formulario_select_default": "Selecciona un servicio",
        "formulario_opcion_plan_negocios": "Plan de Negocios",
        "formulario_opcion_fundacion_legal": "Fundación Legal-Fiscal",
        "formulario_opcion_servicios_nomina": "Servicios de Nómina",
        "formulario_opcion_teneduria_libros": "Contabilidad y Teneduría de Libros",
        "formulario_opcion_impuestos_ventas": "Impuesto sobre Ventas",
        "formulario_opcion_otro": "Otro (Especifique en el mensaje)",
        "formulario_label_mensaje": "Tu Mensaje",
        "formulario_placeholder_mensaje": "Escribe tu mensaje aquí...",
        "formulario_btn_enviar": "Enviar Mensaje",

        // --- Footer ---
        "footer_derechos": "&copy; 2025 SAAB ADVISORS, LLC. Todos los derechos reservados.",
    },
    "en": {
        "menu_logo": "SAAB ADVISORS, LLC",
        "menu_contacto": "Contact",
        "menu_idioma_actual": "English",
        "portada_tagline": "SAAB ADVISORS, LLC",
        "portada_titulo": "Accounting and Strategic Advisory for Your Growth in the U.S.",
        "portada_subtitulo": "We transform the complexity of your administration and finances into simplicity. We handle the work; you enjoy the performance.",
        "portada_btn_consulta": "Schedule a Consultation",

        // --- Sección Características (Iconos) ---
        "caracteristicas_titulo": "Our Services",
        "caract_titulo_1": "Business Start",
        "caract_desc_1": "We understand that all businesses are different. In this sense, we offer you all the services you need to start your business.",
        "caract_titulo_2": "Payroll Services",
        "caract_desc_2": "Our Payroll Services are designed to provide you with a comprehensive solution for managing your payroll duties.",
        "caract_titulo_3": "Accounting and Bookkeeping",
        "caract_desc_3": "The objective of accounting is to assess a company's financial situation and communicate that information to the relevant stakeholders. In contrast, the objective of bookkeeping is to maintain a systematic and accurate record of all financial transactions.",

        // --- Sección Sobre Nosotros ---
        "sobre_titulo": "Get to know us better",
        "sobre_p1": "We are a comprehensive advisory firm based in the U.S., specializing in accounting and consulting to boost small and medium-sized businesses. Our multidisciplinary team is dedicated to finding practical solutions to financial and regulatory compliance challenges.",
        "sobre_p2": "We offer a distinctive service by maintaining open and permanent communication with our clients, accountants, and administrators. This collaborative approach is the foundation for ensuring the growth and well-being of both your company and our collaborators.",
        "sobre_punto_titulo_1": "Leadership in Energy",
        "sobre_punto_desc_1": "Deep specialization in the regulatory framework of the energy sector.",
        "sobre_punto_titulo_2": "Compliance",
        "sobre_punto_desc_2": "Legal and fiscal strategies designed to operate without risk of sanctions.",
        
        // --- Sección Servicios (Tarjetas Detalladas) ---
        "servicios_titulo": "Our Services Detail", // Título de la sección de servicios
        
        "servicios_card1_titulo": "BUSINESS STARTUP",
        "servicios_card1_desc": "We understand that all businesses are different. In this sense, we offer all the services you need to start your business.",
        "servicios_card2_titulo": "PAYROLL SERVICES",
        "servicios_card2_desc": "Our Payroll Services are designed to provide you with a comprehensive solution for managing your payroll obligations.",
        "servicios_card3_titulo": "ACCOUNTING AND RECORDS",
        "servicios_card3_desc": "We evaluate financial status and manage systematic, accurate recording of all transactions, essential for fiscal planning and business health.",

        // Listas de Servicios (Claves nuevas para las listas)
        "servicios_lista1_intro": "Services:",
        "servicios_lista1_1": "Business Plan",
        "servicios_lista1_2": "Legal-Fiscal Foundation (Anti-Sanciones)",
        "servicios_lista1_3": "Sole Proprietorship",
        "servicios_lista1_4": "Partnership",
        "servicios_lista1_5": "Corporation (includes S Corp)",
        "servicios_lista1_6": "Limited Liability Company (LLC)",

        "servicios_lista2_intro": "Services:",
        "servicios_lista2_1": "Quarterly Tax Forms",
        "servicios_lista2_2": "Year-End Tax Forms",
        "servicios_lista2_3": "W2 and 1099",

        "servicios_lista3_intro": "Our services include, but are not limited to:",
        "servicios_lista3_1": "Bookkeeping: Management of financial records on a monthly, quarterly, or annual basis.",
        "servicios_lista3_2": "General Ledger: Preparation of the statement of financial position.",
        "servicios_lista3_3": "Bank Reconciliation: Verification and adjustment of bank balances and accounting records.",
        "servicios_lista3_4": "Payroll and Payroll Tax Filing.",
        "servicios_lista3_5": "Sales Tax.",

        // --- Sección Contacto ---
        "contacto_titulo": "Contact Us",
        "contacto_descripcion": "We are ready to address your questions and begin designing the strategic roadmap that will ensure the well-being and growth of your company in the U.S.",
        "contacto_online_titulo": "Our Advantage",
        "contacto_online_descripcion": "We operate 100% online, offering flexibility and access to our services from anywhere in the world.",
        "contacto_telefono_titulo": "Call Us",
        "contacto_telefono_valor": "+1 (786) 5614860", // El valor no se traduce, se mantiene como texto, pero la clave existe.
        "link_whatsapp": "Chat with an Advisor",
        "link_agenda": "Schedule an Appointment",
        "contacto_siguenos": "Follow Us",
        "formulario_nombre": "Full Name",
        "formulario_email": "Email",
        "formulario_telefono": "Phone (Optional)",
        "formulario_asunto": "Subject",
        "formulario_placeholder_nombre": "John Carter",
        "formulario_placeholder_email": "example@youremail.com",
        "formulario_placeholder_telefono": "123 - 456 - 7890",
        "formulario_placeholder_asunto": "Design Inquiry",
        "formulario_label_servicio": "Service of Interest",
        "formulario_select_default": "Select a service",
        "formulario_opcion_plan_negocios": "Business Plan",
        "formulario_opcion_fundacion_legal": "Legal-Fiscal Foundation",
        "formulario_opcion_servicios_nomina": "Payroll Services",
        "formulario_opcion_teneduria_libros": "Accounting and Bookkeeping",
        "formulario_opcion_impuestos_ventas": "Sales Tax",
        "formulario_opcion_otro": "Other (Specify in message)",
        "formulario_label_mensaje": "Your Message",
        "formulario_placeholder_mensaje": "Write your message here...",
        "formulario_btn_enviar": "Send Message",


        // --- Footer ---
        "footer_derechos": "&copy; 2025 SAAB ADVISORS, LLC. All rights reserved.",
    }
};

let idiomaActual = 'en'; 

function cambiarIdioma(lang) {
    if (!traducciones[lang]) {
        console.error(`Idioma ${lang} no soportado.`);
        return;
    }

    document.querySelectorAll('[data-traducir]').forEach(elemento => {
        const clave = elemento.getAttribute('data-traducir');
        if (traducciones[lang][clave]) {
            // Manejar el atributo 'title' del head
            if (elemento.tagName === 'TITLE') {
                 document.title = traducciones[lang][clave];
            // Manejar elementos de formulario
            } else if (elemento.tagName === 'INPUT' || elemento.tagName === 'TEXTAREA') {
                // Para input/textarea solo actualizamos el placeholder
                if (elemento.placeholder) {
                    // Solo actualizamos el placeholder si la clave corresponde a un placeholder
                    if (clave.startsWith("formulario_placeholder_")) {
                        elemento.placeholder = traducciones[lang][clave];
                    }
                } else if (clave.startsWith("formulario_")) {
                    // Por si acaso queremos traducir el value de un botón input, aunque usamos BUTTON en este caso.
                    elemento.value = traducciones[lang][clave];
                }

            } else if (elemento.tagName === 'LABEL') {
                // Actualizar el texto de las etiquetas (labels)
                elemento.innerHTML = traducciones[lang][clave];

            } else if (elemento.tagName === 'SELECT') {
                // La traducción del select se maneja directamente con las opciones, si es necesario.
                // Aquí solo se traduce el label asociado al select, no el select en sí.
                return;

            } else if (elemento.tagName === 'OPTION') {
                // Manejo de las opciones dentro del <select>
                const value = elemento.value;
                if (value === "") {
                    // Opción deshabilitada/seleccionada por defecto
                    elemento.textContent = traducciones[lang]['formulario_select_default'];
                } else if (clave.startsWith("formulario_opcion_")) {
                    // Otras opciones
                    elemento.textContent = traducciones[lang][clave];
                }

            // Ignorar el logo si solo contiene una imagen
            } else if (elemento.tagName === 'A' && elemento.classList.contains('logo-saab')) {
                return;

            } else {
                // Para la mayoría de los elementos (p, h, span, a, li, button, etc.)
                elemento.innerHTML = traducciones[lang][clave];
            }
        }
    });

    // Manejo de la etiqueta <label> fuera del loop
    document.querySelectorAll('label[for]').forEach(label => {
        const inputId = label.getAttribute('for');
        const inputElement = document.getElementById(inputId);
        
        // Re-evaluación para labels para asegurar la traducción
        if (inputElement && inputElement.tagName !== 'SELECT') {
            const claveBase = "formulario_" + inputId; 
            const claveSelect = "formulario_label_" + inputId;
            
            let claveTraducir = null;
            if (traducciones[lang][claveBase]) {
                 claveTraducir = claveBase;
            } else if (traducciones[lang][claveSelect]) {
                claveTraducir = claveSelect;
            }

            if (claveTraducir) {
                label.innerHTML = traducciones[lang][claveTraducir];
            }
        } else if (inputElement && inputElement.tagName === 'SELECT' && traducciones[lang]['formulario_label_servicio']) {
             // Caso específico para la etiqueta del select
             const labelServicio = document.querySelector('label[for="servicio"]');
             if (labelServicio) {
                 labelServicio.innerHTML = traducciones[lang]['formulario_label_servicio'];
             }
        }
    });


    // Manejar opciones del select por separado (si es necesario)
    const selectServicio = document.getElementById('servicio');
    if (selectServicio) {
        selectServicio.querySelectorAll('option').forEach(option => {
            const value = option.value;
            let key;
            if (value === "") {
                key = 'formulario_select_default';
            } else if (value === "plan_negocios") {
                key = 'formulario_opcion_plan_negocios';
            } else if (value === "fundacion_legal") {
                key = 'formulario_opcion_fundacion_legal';
            } else if (value === "servicios_nomina") {
                key = 'formulario_opcion_servicios_nomina';
            } else if (value === "teneduria_libros") {
                key = 'formulario_opcion_teneduria_libros';
            } else if (value === "impuestos_ventas") {
                key = 'formulario_opcion_impuestos_ventas';
            } else if (value === "otro") {
                key = 'formulario_opcion_otro';
            }

            if (key && traducciones[lang][key]) {
                option.textContent = traducciones[lang][key];
            }
        });
    }


    // --- Actualizar el texto del idioma actual ---
    document.querySelectorAll('.selector-idioma-contenedor').forEach(contenedor => {
        const spanIdiomaActual = contenedor.querySelector('span[data-traducir="menu_idioma_actual"]');
        if (spanIdiomaActual) {
            spanIdiomaActual.textContent = traducciones[lang]['menu_idioma_actual'];
        }
        
        // Actualizar la clase 'seleccionado'
        contenedor.querySelectorAll('.opcion-idioma').forEach(opcion => {
            opcion.classList.remove('seleccionado');
            if (opcion.getAttribute('data-lang') === lang) {
                opcion.classList.add('seleccionado');
            }
        });
    });
    
    idiomaActual = lang;
}

document.addEventListener('DOMContentLoaded', () => {
    
    // --- 1. Inicialización de Idioma ---
    cambiarIdioma('en'); // Inicializar la página en inglés

    // --- 2. Configuración de Desplegables de Idioma (ESCRITORIO Y RESPONSIVE) ---
    
    // Seleccionar todos los contenedores de idioma
    const contenedoresIdioma = document.querySelectorAll('.selector-idioma-contenedor');
    
    contenedoresIdioma.forEach(contenedor => {
        const dropdownBoton = contenedor.querySelector('.selector-idioma-boton');
        const idiomaDropdown = contenedor.querySelector('.idioma-desplegable');
        const opcionesIdioma = contenedor.querySelectorAll('.opcion-idioma');
        
        if (dropdownBoton && idiomaDropdown) {
            // Evento para abrir/cerrar el desplegable
            dropdownBoton.addEventListener('click', (e) => {
                e.preventDefault();
                e.stopPropagation(); // Evitar que el clic se propague al document
                
                // Cierra todos los demás desplegables de idioma abiertos
                document.querySelectorAll('.idioma-desplegable').forEach(dd => {
                    if (dd !== idiomaDropdown) {
                        dd.classList.remove('visible');
                    }
                });
                
                idiomaDropdown.classList.toggle('visible');
            });

            // Evento para seleccionar el idioma
            opcionesIdioma.forEach(opcion => {
                opcion.addEventListener('click', (e) => {
                    e.preventDefault();
                    
                    const nuevoIdioma = opcion.getAttribute('data-lang');
                    cambiarIdioma(nuevoIdioma);
                    
                    // Cierra el desplegable después de seleccionar
                    idiomaDropdown.classList.remove('visible');
                    
                    // Asegurar que el menú responsive se cierre si la opción estaba allí
                    const menuDesplegable = document.getElementById('menuDesplegable');
                    if (menuDesplegable && menuDesplegable.classList.contains('activo')) {
                        menuDesplegable.classList.remove('activo');
                    }
                });
            });
        }
    });

    // --- 3. Cierre Global del Desplegable (Cerrar al hacer clic fuera) ---
    document.addEventListener('click', (e) => {
        const target = e.target;
        
        // Verifica si el clic fue fuera de cualquier botón y fuera de cualquier desplegable
        const isBoton = target.closest('.selector-idioma-boton');
        const isDropdown = target.closest('.idioma-desplegable');
        
        if (!isBoton && !isDropdown) {
            document.querySelectorAll('.idioma-desplegable').forEach(dd => {
                dd.classList.remove('visible');
            });
        }
    });
});